<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>File Editing Demo</title>
  </head>
  <body>
    <h1>Demo File Editing</h1>
    <button id="chooseFolder">Elegir carpeta</button>
    <button id="createFile">Crear archivo</button>
    <button id="readFile">Leer archivo</button>
    <textarea
      id="editor"
      rows="10"
      cols="50"
      placeholder="Escribe aquÃ­..."
    ></textarea>

    <script>
      let folderHandle;
      let fileHandle;

      document.getElementById("chooseFolder").onclick = async () => {
        folderHandle = await window.showDirectoryPicker();
        alert("Carpeta seleccionada: " + folderHandle.name);
      };

      document.getElementById("createFile").onclick = async () => {
        if (!folderHandle) return alert("Primero selecciona una carpeta");
        fileHandle = await folderHandle.getFileHandle("demo.txt", {
          create: true,
        });
        const writable = await fileHandle.createWritable();
        await writable.write("Hola desde Chrome File Editing API");
        await writable.close();
        alert("Archivo demo.txt creado/actualizado");
      };

      document.getElementById("readFile").onclick = async () => {
        if (!fileHandle) return alert("Primero crea el archivo");
        const file = await fileHandle.getFile();
        const text = await file.text();
        document.getElementById("editor").value = text;
      };
    </script>
  </body>
</html>
